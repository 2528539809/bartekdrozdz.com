var Config={vscrollEnabled:!0,scrollMargin:0};if(Config.vscrollEnabled){var h=function(t){document.querySelector(t).style.overflowY="hidden"};h("#main"),h("#about"),h("#content"),document.querySelector("#content").style.pointerEvents="none"}(location.host.indexOf("localhost")>-1||location.host.indexOf("192.168")>-1)&&document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"></'+"script>"),window.addEventListener("load",function(){Loader.loadJSON("/data",function(t){Data.setMain(t),Site(),MainPanel(),AboutPanel(),ContentPanel(),Router()})}),function(t){t.Data=function(){var t,e={};return e.setMain=function(e){t=e},e.getMain=function(){return t},e.getProjectById=function(e){e=e.indexOf("?")>-1?e.split("?")[0]:e;var n,o,a=t.projects.length,r=t.play.length;for(o=0;a>o;o++)if(n=t.projects[o],n.id==e)return n;for(o=0;r>o;o++)if(n=t.play[o],n.id==e)return n},e}()}("undefined"!=typeof process&&process.versions?exports:window),function(){for(var t=0,e=["webkit","moz"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),o=Math.max(0,16-(n-t)),a=window.setTimeout(function(){e(n+o)},o);return t=n+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),window.Simplrz=function(){var t={},e=[],n=function(n,o){var a=o();t[n]=a,e.push(a?n:"no-"+n)},o=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1];return{dom:n,lowercase:e,css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}}();return e.push(o.lowercase),n("touch",function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}),n("webrct",function(){return"getUserMedia"in navigator||"webkitGetUserMedia"in navigator}),n("canvas",function(){try{var t=document.createElement("canvas");return t.getContext("2d")}catch(e){return!1}}),n("webgl",function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}),n("flash",function(){return!!(navigator.mimeTypes["application/x-shockwave-flash"]||window.ActiveXObject&&new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}),document.documentElement.setAttribute("class",e.join(" ")),t}(),window.VirtualScroll=function(t){var e,n,o,a={},r=[],i=!1,c=2,s=-8,d={y:0,x:0,deltaX:0,deltaY:0};a.addEventListener=function(t){i||u(),r.push(t),e=r.length},a.invokeFirefox=function(t){d.y+=t.detail*s,d.deltaY=t.detail*s,l()};var l=function(){for(var t=0;e>t;t++)r[t](d)},u=function(){var e=function(t,e){t.preventDefault(),d.y+=e,d.deltaY=e,l()};t.addEventListener("mousewheel",function(t){e(t,t.wheelDeltaY||t.wheelDelta)}),t.addEventListener("DOMMouseScroll",function(t){e(t,t.detail*s)}),t.addEventListener("touchstart",function(t){var e=t.targetTouches[0];n=e.pageX,o=e.pageY}),t.addEventListener("touchmove",function(t){var n=t.targetTouches[0];e(t,(n.pageY-o)*c),o=n.pageY}),i=!0};return a}(document),Math.clamp=function(t,e,n){return Math.max(Math.min(t,n),e)},Math.pointInRect=function(t,e){return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom},CSSUtil={hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}};var RL={};RL.setRlc=function(){},RL.log=RL.warn=RL.error=function(t){console.log("RL",t)},window.Broadcast=function(){var t={},e=function(){this.send=function(e,n){var o=t[e];if(o)for(var a=o.length,r=0;a>r;r++)o[r]&&o[r](n)},this.addClient=function(e,n){t[e]||(t[e]=[]);var o=t[e];o[n]>-1||o.push(n)},this.removeClient=function(e,n){var o=t[e];if(o)return o.splice(o.indexOf(n),1)},this.getClients=function(e){return t[e]}};return new e}(),window.Loader={loadText:function(t,e){var n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=function(){4==n.readyState&&e.call(null,n.responseText)},n.send()},loadJSON:function(t,e){Loader.loadText(t,function(t){e(JSON.parse(t))})}},window.Wrapper=function(t){var e=this,n="tap",o=t,a=0,r=0,i=0,c=0,s=0,d=0,l=1,u=1,f=function(){var t="translate3d("+a+"px,"+r+"px,"+i+"px) ",e="scale("+l+","+u+") ",n="rotateX("+c+"deg) rotateY("+s+"deg) rotateZ("+d+"deg)";o.style.webkitTransform=t+e+n,o.style.transform=t+e+n};this.move=function(t,e,n){a=t||0,r=e||0,i=n||0,f()},this.rotate=function(t,e,n){c=t||0,s=e||0,d=n||0,f()},this.scale=function(t,e){l=null!==t?t:1,u=null!==e?e:1,f()},this.moveBy=function(t,e,n){a+=t||0,r+=e||0,i+=n||0,f()},this.height=function(){return o.scrollHeight},this.rect=function(){return o.getBoundingClientRect()},this.position=function(){for(var t=o,e=0,n=0;null!=t;e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent);return{x:e,y:n}},this.css=function(t,e){return t?(o.style[t]=e,void 0):o.style},this.e=function(){return o},this.on=function(t,e){t==n?(e.tapHandler=function(){var t,n,o,a={},r=2e4,i=100;return a.touchStart=function(e){t=(new Date).getTime(),n=e.targetTouches[0].pageX,o=e.targetTouches[0].pageY},a.touchEnd=function(a){var c=(new Date).getTime()-t,s=a.changedTouches[0].pageX-n,d=a.changedTouches[0].pageY-o,l=s*s+d*d;r>c&&i>l&&e()},a}(),o.addEventListener("touchstart",e.tapHandler.touchStart),o.addEventListener("touchend",e.tapHandler.touchEnd)):o.addEventListener(t,e)},this.off=function(t,e){o.removeEventListener(t,e)},this.addClass=function(t){p.push(t),e.attr("class",p.join(" "))},this.rmClass=function(t){p.splice(p.indexOf(t),1),e.attr("class",p.join(" "))},this.attr=function(e,n){return n?(t.setAttribute(e,n),void 0):t.getAttribute(e)},this.select=function(t){return Wrapper.select(t,o)},this.selectAll=function(t){return Wrapper.selectAll(t,o)};var p=(this.attr("class")||"").split(" ")},Wrapper.create=function(t){return new Wrapper(document.createElement(t))},Wrapper.select=function(t,e){var n=(e||document).querySelector(t);return n?new Wrapper(n):null},Wrapper.selectAll=function(t,e){for(var n=(e||document).querySelectorAll(t),o=[],a=0;a<n.length;a++)o.push(new Wrapper(n[a]));return o},window.Msg={},Msg.SCROLL="msgScroll",Msg.RENDER="msgRender",Msg.RESIZE="msgResize",Msg.ON_MAIN_OPEN="onMainOpen",Msg.ON_ABOUT_OPEN="onAboutOpen",Msg.ON_ITEM_OPEN="onItemOpen",window.Site=function(){var t={x:0,y:0};if(Config.click=Simplrz.touch?"tap":"click",Config.vscrollEnabled){window.scroll(0,1),VirtualScroll.addEventListener(function(t){Broadcast.send(Msg.SCROLL,t)}),window.addEventListener("resize",function(){Broadcast.send(Msg.RESIZE)}),window.addEventListener("mousemove",function(e){t.x=e.pageX,t.y=e.pageY});var e=function(){requestAnimationFrame(e),Broadcast.send(Msg.RENDER,t)};e()}},window.MainPanel=function(){var t,e=!0,n=0,o=0,a=Wrapper.select("#main"),r=Wrapper.select("#header"),i=Wrapper.select("#projects"),c=Wrapper.select("#play"),s=Wrapper.select("#footer"),d=Wrapper.selectAll(".box"),l=function(t){t?a.addClass("animated"):a.rmClass("animated")},u=function(){t=a.height()-window.innerHeight},f=function(t){e&&(o+=t.deltaY)},p=function(){if(e){o=Math.clamp(o,-t,0);var a=.2*(o-n);n+=a;var d=0|n;r.move(0,.6*d),i.move(0,d),c.move(0,d),s.move(0,d)}},h=function(){e||(a.move(0,0),e=!0)},g=function(){var t=window.innerWidth>500?500:window.innerWidth;a.move(t,0),e=!1},m=function(){var t=-window.innerWidth;a.move(t,0),e=!1};Broadcast.addClient(Msg.ON_ITEM_OPEN,m),Broadcast.addClient(Msg.ON_ABOUT_OPEN,g),Broadcast.addClient(Msg.ON_MAIN_OPEN,h),Broadcast.addClient(Msg.SCROLL,f),Broadcast.addClient(Msg.RESIZE,u),Broadcast.addClient(Msg.RENDER,p),d.forEach(function(t){t=Box(t),t.current=t.target=0}),u(),l(!0)},window.AboutPanel=function(){var t,e=!1,n=0,o=0,a=Wrapper.select("#about section");Wrapper.select("#about .close");var r=Wrapper.select("#about section > div");Wrapper.selectAll("#about .panel");var i=function(){t=a.height()<window.innerHeight?0:a.height()-window.innerHeight+Config.scrollMargin},c=function(t){e&&(o+=t.deltaY)},s=function(){e&&(o=Math.clamp(o,-t,0),n+=.2*(o-n),a.move(0,n))},d=function(){e=!0,r.e().setAttribute("class","animated"),r.rotate(0,0,0),r.move(0,0,0),r.css("opacity",1)},l=function(){if(e){r.rotate(0,-90,0);var t=window.innerWidth>500?500:window.innerWidth;r.move(-t,0,0),r.css("opacity",0),e=!1,u()}},u=function(){e=!1};Broadcast.addClient(Msg.ON_ITEM_OPEN,u),Broadcast.addClient(Msg.ON_ABOUT_OPEN,d),Broadcast.addClient(Msg.ON_MAIN_OPEN,l),Broadcast.addClient(Msg.SCROLL,c),Broadcast.addClient(Msg.RENDER,s),Broadcast.addClient(Msg.RESIZE,i);var f=window.innerWidth>500?500:window.innerWidth;r.move(-f,0,0),r.rotate(0,-90,0),i()},window.ContentPanel=function(){var t,e,n,o=!1,a=0,r=0,i=Wrapper.select("#content section"),c=Wrapper.select("#content h2"),s=Wrapper.select("#content .content"),d=Wrapper.select("#content .hero"),l=Wrapper.select("#content .close"),u=function(){t=s.position().y-(window.innerHeight-s.height())+Config.scrollMargin,t=Math.max(0,t)},f=function(e){!o||0>=t||(r+=e.deltaY)},p=function(){!o||0>=t||(r=Math.clamp(r,-t,0),a+=.2*(r-a),s.move(0,a),e&&e.move(0,.5*a),n&&n.move(0,.5*a))},h=function(e){o=!0,t=0,setTimeout(g,500,Data.getProjectById(e))},g=function(t){l.css("display","block"),i.css("display","block"),c.e().innerHTML=t.name,Loader.loadText(t.contentUrl,function(t){s.e().innerHTML=t,u()});var o=[];t.deps.forEach(function(t){console.log("Checking dependency",t,Simplrz[t]),Simplrz[t]||o.push(t)});var a=window.innerWidth,r=window.innerHeight;if("demo"==t.type&&0==o.length){var f=.8*window.innerHeight;e=Wrapper.create("iframe"),e.e().setAttribute("frameBorder","0"),e.on("load",function(){setTimeout(function(){e.css("opacity","1")},500)}),e.css("opacity","0"),e.css("height",f+"px"),d.e().appendChild(e.e()),e.e().contentWindow.location.replace(t.url)}else{n=Wrapper.create("img");var p=Wrapper.create("div");n.on("load",function(){p.css("backgroundColor","rgba(0, 0, 0, 0)"),u()}),a>r||a>768?(n.css("width","100%"),n.css("height",a*(100/235)+"px"),p.css("width","100%"),p.css("height",a*(100/235)+"px"),n.e().src="assets/content/1920w-235as/"+t.id+".jpg"):(n.css("width","100%"),n.css("height",a+"px"),p.css("width","100%"),p.css("height",a+"px"),n.e().src="assets/content/871sq/"+t.id+".jpg"),d.e().appendChild(n.e()),d.e().appendChild(p.e())}},m=function(){o&&(o=!1,w())},w=function(){if(o=!1,s.e().innerHTML="",e){try{e.e().contentWindow.kill()}catch(t){}d.e().removeChild(e.e()),e=null}n&&(d.e().removeChild(n.e()),n=null),l.css("display","none"),i.css("display","none")};Broadcast.addClient(Msg.SCROLL,f),Broadcast.addClient(Msg.RENDER,p),Broadcast.addClient(Msg.RESIZE,u),Broadcast.addClient(Msg.ON_MAIN_OPEN,m),Broadcast.addClient(Msg.ON_ABOUT_OPEN,w),Broadcast.addClient(Msg.ON_ITEM_OPEN,h)},window.Box=function(t){t.id=t.attr("data-id");var e,n,o,a,r,i=t.select("div:nth-of-type(1)"),c=t.select(".hover"),s=i.select(".mask"),d=i.select("img"),l=d.attr("data-tint"),u=t.attr("data-type"),f=window.innerWidth>768,p="project"==u?"675sq":"400sq",h="project"==u?"320sq":"200sq",g=f?p:h,m="assets/content/%f%/%id%.jpg".replace("%f%",g).replace("%id%",t.id);d.on("load",function(){Simplrz.touch?(r=Wrapper.create("div"),r.attr("class","frame"),r.css("borderColor",l),i.e().appendChild(r.e())):(e=Wrapper.create("div"),n=Wrapper.create("div"),o=Wrapper.create("div"),a=Wrapper.create("div"),e.attr("class","hover-frame left in-first"),n.attr("class","hover-frame top in-first"),o.attr("class","hover-frame right in-second"),a.attr("class","hover-frame bottom in-second"),e.css("backgroundColor",l),n.css("backgroundColor",l),o.css("backgroundColor",l),a.css("backgroundColor",l),c.e().appendChild(e.e()),c.e().appendChild(n.e()),c.e().appendChild(o.e()),c.e().appendChild(a.e()),Broadcast.addClient(Msg.RENDER,C)),s.css("backgroundColor","rgba(0, 0, 0, 0)")});var w=function(){e.attr("class","hover-frame left in-first"),n.attr("class","hover-frame top in-first"),o.attr("class","hover-frame right in-second"),a.attr("class","hover-frame bottom in-second"),e.css("height","100%"),n.css("width","100%"),o.css("height","100%"),a.css("width","100%")},v=function(){e.attr("class","hover-frame left out-first"),n.attr("class","hover-frame top out-first"),o.attr("class","hover-frame right out-second"),a.attr("class","hover-frame bottom out-second"),e.css("height","0"),n.css("width","0"),o.css("height","0"),a.css("width","0")},E=!1,M=function(){var e=t.e().getBoundingClientRect();e.top<window.innerHeight&&(d.e().src=m,Broadcast.removeClient(Msg.RENDER,M))},C=function(e){var n=t.e().getBoundingClientRect(),o=Math.pointInRect(e,n);o!=E&&(o?w():v()),E=o};return Broadcast.addClient(Msg.RENDER,M),t},window.Router=function(){var t,e,n,o=100,a=function(o){e=o,t=n+"#"+e,document.location.href=t},r=function(){t=document.location.href;var o=t.indexOf("#");e=t.substring(o+1),n||(n=e.length>0?t.substring(0,o):t)},i=function(){0==e.indexOf("/about")?Broadcast.send(Msg.ON_ABOUT_OPEN):0==e.indexOf("/project")?Broadcast.send(Msg.ON_ITEM_OPEN,e.split("/")[2]):Broadcast.send(Msg.ON_MAIN_OPEN)};Broadcast.addClient(Msg.ON_MAIN_OPEN,function(){a("/")}),Broadcast.addClient(Msg.ON_ABOUT_OPEN,function(){a("/about")}),Broadcast.addClient(Msg.ON_ITEM_OPEN,function(t){a("/project/"+t)}),r(),i(),setInterval(function(){document.location.href!=t&&(console.log("href changed",document.location.href,t),r(),i(e))},o)};