var Config={vscrollEnabled:!0,scrollMargin:0};if(Config.vscrollEnabled){var h=function(e){document.querySelector(e).style.overflowY="hidden"};h("#main"),h("#about"),h("#content"),document.querySelector("#content").style.pointerEvents="none"}(location.host.indexOf("localhost")>-1||location.host.indexOf("192.168")>-1)&&document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"></'+"script>"),window.addEventListener("load",function(){Loader.loadJSON("/data",function(e){Data.setMain(e),Site(),MainPanel(),AboutPanel(),ContentPanel(),Router()})}),function(e){e.Data=function(){var e,t={};return t.setMain=function(t){e=t},t.getMain=function(){return e},t.getProjectById=function(t){t=t.indexOf("?")>-1?t.split("?")[0]:t;var n,o,i=e.projects.length,a=e.play.length;for(o=0;i>o;o++)if(n=e.projects[o],n.id==t)return n;for(o=0;a>o;o++)if(n=e.play[o],n.id==t)return n},t}()}("undefined"!=typeof process&&process.versions?exports:window),function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),o=Math.max(0,16-(n-e)),i=window.setTimeout(function(){t(n+o)},o);return e=n+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),window.Simplrz=function(){var e={},t=[],n=function(n,o){var i=o();e[n]=i,t.push(i?n:"no-"+n)},o=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}();return t.push(o.lowercase),n("touch",function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}),n("webgl",function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}),n("flash",function(){return!!(navigator.mimeTypes["application/x-shockwave-flash"]||window.ActiveXObject&&new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}),document.documentElement.setAttribute("class",t.join(" ")),e}(),window.VirtualScroll=function(e){var t,n,o,i={},a=[],r=!1,c=2,s=-8,d={y:0,x:0,deltaX:0,deltaY:0};i.addEventListener=function(e){r||u(),a.push(e),t=a.length},i.invokeFirefox=function(e){d.y+=e.detail*s,d.deltaY=e.detail*s,l()};var l=function(){for(var e=0;t>e;e++)a[e](d)},u=function(){var t=function(e,t){e.preventDefault(),d.y+=t,d.deltaY=t,l()};e.addEventListener("mousewheel",function(e){t(e,e.wheelDeltaY)}),e.addEventListener("DOMMouseScroll",function(e){t(e,e.detail*s)}),e.addEventListener("touchstart",function(e){var t=e.targetTouches[0];n=t.pageX,o=t.pageY}),e.addEventListener("touchmove",function(e){var n=e.targetTouches[0];t(e,(n.pageY-o)*c),o=n.pageY}),r=!0};return i}(document),Math.clamp=function(e,t,n){return Math.max(Math.min(e,n),t)};var RL={};RL.setRlc=function(){},RL.log=RL.warn=RL.error=function(e){console.log("RL",e)},window.Broadcast=function(){var e={},t=function(){this.send=function(t,n){var o=e[t];if(o)for(var i=o.length,a=0;i>a;a++)o[a]&&o[a](n)},this.addClient=function(t,n){e[t]||(e[t]=[]);var o=e[t];o[n]>-1||o.push(n)},this.removeClient=function(t,n){var o=e[t];if(o)return o.splice(o.indexOf(n),1)},this.getClients=function(t){return e[t]}};return new t}(),window.Loader={loadText:function(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(){4==n.readyState&&t.call(null,n.responseText)},n.send()},loadJSON:function(e,t){Loader.loadText(e,function(e){t(JSON.parse(e))})}},window.Wrapper=function(e){var t=this,n="tap",o=e,i=0,a=0,r=0,c=0,s=0,d=0,l=1,u=1,f=function(){var e="translate3d("+i+"px,"+a+"px,"+r+"px) ",t="scale("+l+","+u+") ",n="rotateX("+c+"deg) rotateY("+s+"deg) rotateZ("+d+"deg)";o.style.webkitTransform=e+t+n,o.style.transform=e+t+n};this.move=function(e,t,n){i=e||0,a=t||0,r=n||0,f()},this.rotate=function(e,t,n){c=e||0,s=t||0,d=n||0,f()},this.scale=function(e,t){l=e||1,u=t||1,f()},this.moveBy=function(e,t,n){i+=e||0,a+=t||0,r+=n||0,f()},this.height=function(){return o.scrollHeight},this.position=function(){for(var e=o,t=0,n=0;null!=e;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent);return{x:t,y:n}},this.css=function(e,t){return e?(o.style[e]=t,void 0):o.style},this.e=function(){return o},this.on=function(e,t){e==n?(t.tapHandler=function(){var e,n,o,i={},a=2e4,r=100;return i.touchStart=function(t){e=(new Date).getTime(),n=t.targetTouches[0].pageX,o=t.targetTouches[0].pageY},i.touchEnd=function(i){var c=(new Date).getTime()-e,s=i.changedTouches[0].pageX-n,d=i.changedTouches[0].pageY-o,l=s*s+d*d;a>c&&r>l&&t()},i}(),o.addEventListener("touchstart",t.tapHandler.touchStart),o.addEventListener("touchend",t.tapHandler.touchEnd)):o.addEventListener(e,t)},this.off=function(e,t){o.removeEventListener(e,t)},this.addClass=function(e){p.push(e),t.attr("class",p.join(" "))},this.rmClass=function(e){p.splice(p.indexOf(e),1),t.attr("class",p.join(" "))},this.attr=function(t,n){return n?(e.setAttribute(t,n),void 0):e.getAttribute(t)},this.select=function(e){return Wrapper.select(e,o)},this.selectAll=function(e){return Wrapper.selectAll(e,o)};var p=(this.attr("class")||"").split(" ")},Wrapper.create=function(e){return new Wrapper(document.createElement(e))},Wrapper.select=function(e,t){var n=(t||document).querySelector(e);return n?new Wrapper(n):null},Wrapper.selectAll=function(e,t){for(var n=(t||document).querySelectorAll(e),o=[],i=0;i<n.length;i++)o.push(new Wrapper(n[i]));return o},window.Msg={},Msg.SCROLL="msgScroll",Msg.RENDER="msgRender",Msg.RESIZE="msgResize",Msg.ON_MAIN_OPEN="onMainOpen",Msg.ON_ABOUT_OPEN="onAboutOpen",Msg.ON_ITEM_OPEN="onItemOpen",window.Site=function(){if(Config.click=Simplrz.touch?"tap":"click",Config.vscrollEnabled){window.scroll(0,1),VirtualScroll.addEventListener(function(e){Broadcast.send(Msg.SCROLL,e)}),window.addEventListener("resize",function(){Broadcast.send(Msg.RESIZE)});var e=function(){requestAnimationFrame(e),Broadcast.send(Msg.RENDER)};e()}},window.MainPanel=function(){var e,t=!0,n=0,o=0,i=Wrapper.select("#main"),a=Wrapper.select("#header"),r=Wrapper.select("#projects"),c=Wrapper.select("#play"),s=Wrapper.select("#footer"),d=Wrapper.selectAll(".box"),l=function(e){e?i.addClass("animated"):i.rmClass("animated")},u=function(){e=i.height()-window.innerHeight},f=function(e){t&&(o+=e.deltaY)},p=function(){t&&(o=Math.clamp(o,-e,0),n+=.2*(o-n),a.move(0,n),r.move(0,n),c.move(0,n),s.move(0,n))},h=function(){t||(i.move(0,0),t=!0)},g=function(){var e=window.innerWidth>500?500:window.innerWidth;i.move(e,0),t=!1},w=function(){var e=-window.innerWidth;i.move(e,0),t=!1};Broadcast.addClient(Msg.ON_ITEM_OPEN,w),Broadcast.addClient(Msg.ON_ABOUT_OPEN,g),Broadcast.addClient(Msg.ON_MAIN_OPEN,h),Broadcast.addClient(Msg.SCROLL,f),Broadcast.addClient(Msg.RESIZE,u),Broadcast.addClient(Msg.RENDER,p),d.forEach(function(e){e=Box(e)}),u(),l(!0)},window.AboutPanel=function(){var e,t=!1,n=0,o=0,i=Wrapper.select("#about section");Wrapper.select("#about .close");var a=Wrapper.select("#about section > div");Wrapper.selectAll("#about .panel");var r=function(){e=i.height()<window.innerHeight?0:i.height()-window.innerHeight+Config.scrollMargin},c=function(e){t&&(o+=e.deltaY)},s=function(){t&&(o=Math.clamp(o,-e,0),n+=.2*(o-n),i.move(0,n))},d=function(){t=!0,a.e().setAttribute("class","animated"),a.rotate(0,0,0),a.move(0,0,0),a.css("opacity",1)},l=function(){if(t){a.rotate(0,-90,0);var e=window.innerWidth>500?500:window.innerWidth;a.move(-e,0,0),a.css("opacity",0),t=!1,u()}},u=function(){t=!1};Broadcast.addClient(Msg.ON_ITEM_OPEN,u),Broadcast.addClient(Msg.ON_ABOUT_OPEN,d),Broadcast.addClient(Msg.ON_MAIN_OPEN,l),Broadcast.addClient(Msg.SCROLL,c),Broadcast.addClient(Msg.RENDER,s),Broadcast.addClient(Msg.RESIZE,r);var f=window.innerWidth>500?500:window.innerWidth;a.move(-f,0,0),a.rotate(0,-90,0),r()},window.ContentPanel=function(){var e,t,n,o=!1,i=0,a=0,r=Wrapper.select("#content section"),c=Wrapper.select("#content .close"),s=Wrapper.select("#content h2"),d=Wrapper.select("#content .content"),l=Wrapper.select("#content .hero"),u=function(){e=d.position().y-(window.innerHeight-d.height())+Config.scrollMargin,e=Math.max(0,e)},f=function(t){!o||0>=e||(a+=t.deltaY)},p=function(){!o||0>=e||(a=Math.clamp(a,-e,0),i+=.2*(a-i),d.move(0,i),t&&t.move(0,.5*i),n&&n.move(0,.5*i))},h=function(t){o=!0,e=0,setTimeout(g,500,Data.getProjectById(t))},g=function(e){c.css("display","block"),r.css("display","block"),s.e().innerHTML=e.name,Loader.loadText(e.contentUrl,function(e){d.e().innerHTML=e,u()});var o=[];e.deps.forEach(function(e){Simplrz[e]||o.push(e)});var i=window.innerWidth,a=window.innerHeight;if("demo"==e.type){var f=9/16;if(e.aspect&&""!=e.aspect){var p=parseInt(e.aspect.split(":")[0]),h=parseInt(e.aspect.split(":")[1]);f=-1==p?a/i:h/p}var g=i*f;g<a-d.height()&&(g=a-d.height()),500>i&&(g=i),t=Wrapper.create("iframe"),t.e().setAttribute("frameBorder","0"),t.on("load",function(){t.css("opacity","1");var e=t.e().contentDocument;e&&e.addEventListener("DOMMouseScroll",function(e){VirtualScroll.invokeFirefox(e)})}),t.css("opacity","0"),t.css("height",g+"px"),l.e().appendChild(t.e()),t.e().contentWindow.location.replace(e.url)}else if("article"==e.type){n=Wrapper.create("img");var w=Wrapper.create("div");n.on("load",function(){w.css("backgroundColor","rgba(0, 0, 0, 0)"),u()}),i>a?(n.css("width","100%"),n.css("height",i*(100/235)+"px"),w.css("width","100%"),w.css("height",i*(100/235)+"px"),n.e().src="assets/content/1920w-235as/"+e.id+".jpg"):(n.css("width","100%"),n.css("height",i+"px"),w.css("width","100%"),w.css("height",i+"px"),n.e().src="assets/content/871sq/"+e.id+".jpg"),l.e().appendChild(n.e()),l.e().appendChild(w.e())}},w=function(){o&&(o=!1,m())},m=function(){if(o=!1,d.e().innerHTML="",t){try{t.e().contentWindow.kill()}catch(e){}l.e().removeChild(t.e()),t=null}n&&(l.e().removeChild(n.e()),n=null),c.css("display","none"),r.css("display","none")};Broadcast.addClient(Msg.SCROLL,f),Broadcast.addClient(Msg.RENDER,p),Broadcast.addClient(Msg.RESIZE,u),Broadcast.addClient(Msg.ON_MAIN_OPEN,w),Broadcast.addClient(Msg.ON_ABOUT_OPEN,m),Broadcast.addClient(Msg.ON_ITEM_OPEN,h),c.on(Config.click,function(){Broadcast.send(Msg.ON_MAIN_OPEN)})},window.Box=function(e){e.id=e.attr("data-id");var t=e.select("div:nth-of-type(1) img").e(),n=e.select("div:nth-of-type(1) div").e(),o=t.getAttribute("data-image-large");t.onload=function(){n.style.backgroundColor="rgba(0, 0, 0, 0)"};var i=function(){var n=e.e().getBoundingClientRect();n.top<window.innerHeight&&(t.src=o,Broadcast.removeClient(Msg.RENDER,i))};return Broadcast.addClient(Msg.RENDER,i),e},window.Router=function(){var e,t,n,o=100,i=function(o){console.log("setRoute",o),t=o,e=n+"#"+t,document.location.href=e},a=function(){e=document.location.href;var o=e.indexOf("#");t=e.substring(o+1),n||(n=t.length>0?e.substring(0,o):e),console.log("getRoute",n,t)},r=function(){console.log("solveRoute",t),0==t.indexOf("/about")?Broadcast.send(Msg.ON_ABOUT_OPEN):0==t.indexOf("/project")?Broadcast.send(Msg.ON_ITEM_OPEN,t.split("/")[2]):Broadcast.send(Msg.ON_MAIN_OPEN)};Broadcast.addClient(Msg.ON_MAIN_OPEN,function(){i("/")}),Broadcast.addClient(Msg.ON_ABOUT_OPEN,function(){i("/about")}),Broadcast.addClient(Msg.ON_ITEM_OPEN,function(e){i("/project/"+e)}),a(),r(),setInterval(function(){document.location.href!=e&&(console.log("href changed",document.location.href,e),a(),r(t))},o)};