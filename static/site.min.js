var Config={vscrollEnabled:!0,scrollMargin:0};if(Config.vscrollEnabled){var h=function(e){document.querySelector(e).style.overflowY="hidden"};h("#main"),h("#about"),h("#content"),document.querySelector("#content").style.pointerEvents="none"}(location.host.indexOf("localhost")>-1||location.host.indexOf("192.168")>-1)&&document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"></'+"script>"),window.addEventListener("load",function(){Loader.loadJSON("/data",function(e){Data.setMain(e),Site(),MainPanel(),AboutPanel(),ContentPanel(),Router()})}),function(e){e.Data=function(){var e,t={};return t.setMain=function(t){e=t},t.getMain=function(){return e},t.getProjectById=function(t){t=t.indexOf("?")>-1?t.split("?")[0]:t;var n,o,a=e.projects.length,r=e.play.length;for(o=0;a>o;o++)if(n=e.projects[o],n.id==t)return n;for(o=0;r>o;o++)if(n=e.play[o],n.id==t)return n},t}()}("undefined"!=typeof process&&process.versions?exports:window),function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),o=Math.max(0,16-(n-e)),a=window.setTimeout(function(){t(n+o)},o);return e=n+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),window.Simplrz=function(){var e={},t=[],n=function(n,o){var a=o();e[n]=a,t.push(a?n:"no-"+n)},o=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}();return t.push(o.lowercase),n("touch",function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}),n("webgl",function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}),n("flash",function(){return!!(navigator.mimeTypes["application/x-shockwave-flash"]||window.ActiveXObject&&new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}),document.documentElement.setAttribute("class",t.join(" ")),e}(),window.VirtualScroll=function(e){var t,n,o,a={},r=[],i=!1,c=2,s=-8,d={y:0,x:0,deltaX:0,deltaY:0};a.addEventListener=function(e){i||u(),r.push(e),t=r.length},a.invokeFirefox=function(e){d.y+=e.detail*s,d.deltaY=e.detail*s,l()};var l=function(){for(var e=0;t>e;e++)r[e](d)},u=function(){var t=function(e,t){e.preventDefault(),d.y+=t,d.deltaY=t,l()};e.addEventListener("mousewheel",function(e){t(e,e.wheelDeltaY||e.wheelDelta)}),e.addEventListener("DOMMouseScroll",function(e){t(e,e.detail*s)}),e.addEventListener("touchstart",function(e){var t=e.targetTouches[0];n=t.pageX,o=t.pageY}),e.addEventListener("touchmove",function(e){var n=e.targetTouches[0];t(e,(n.pageY-o)*c),o=n.pageY}),i=!0};return a}(document),Math.clamp=function(e,t,n){return Math.max(Math.min(e,n),t)},Math.pointInRect=function(e,t){return e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom},CSSUtil={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}};var RL={};RL.setRlc=function(){},RL.log=RL.warn=RL.error=function(e){console.log("RL",e)},window.Broadcast=function(){var e={},t=function(){this.send=function(t,n){var o=e[t];if(o)for(var a=o.length,r=0;a>r;r++)o[r]&&o[r](n)},this.addClient=function(t,n){e[t]||(e[t]=[]);var o=e[t];o[n]>-1||o.push(n)},this.removeClient=function(t,n){var o=e[t];if(o)return o.splice(o.indexOf(n),1)},this.getClients=function(t){return e[t]}};return new t}(),window.Loader={loadText:function(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(){4==n.readyState&&t.call(null,n.responseText)},n.send()},loadJSON:function(e,t){Loader.loadText(e,function(e){t(JSON.parse(e))})}},window.Wrapper=function(e){var t=this,n="tap",o=e,a=0,r=0,i=0,c=0,s=0,d=0,l=1,u=1,f=function(){var e="translate3d("+a+"px,"+r+"px,"+i+"px) ",t="scale("+l+","+u+") ",n="rotateX("+c+"deg) rotateY("+s+"deg) rotateZ("+d+"deg)";o.style.webkitTransform=e+t+n,o.style.transform=e+t+n};this.move=function(e,t,n){a=e||0,r=t||0,i=n||0,f()},this.rotate=function(e,t,n){c=e||0,s=t||0,d=n||0,f()},this.scale=function(e,t){l=null!==e?e:1,u=null!==t?t:1,f()},this.moveBy=function(e,t,n){a+=e||0,r+=t||0,i+=n||0,f()},this.height=function(){return o.scrollHeight},this.rect=function(){return o.getBoundingClientRect()},this.position=function(){for(var e=o,t=0,n=0;null!=e;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent);return{x:t,y:n}},this.css=function(e,t){return e?(o.style[e]=t,void 0):o.style},this.e=function(){return o},this.on=function(e,t){e==n?(t.tapHandler=function(){var e,n,o,a={},r=2e4,i=100;return a.touchStart=function(t){e=(new Date).getTime(),n=t.targetTouches[0].pageX,o=t.targetTouches[0].pageY},a.touchEnd=function(a){var c=(new Date).getTime()-e,s=a.changedTouches[0].pageX-n,d=a.changedTouches[0].pageY-o,l=s*s+d*d;r>c&&i>l&&t()},a}(),o.addEventListener("touchstart",t.tapHandler.touchStart),o.addEventListener("touchend",t.tapHandler.touchEnd)):o.addEventListener(e,t)},this.off=function(e,t){o.removeEventListener(e,t)},this.addClass=function(e){p.push(e),t.attr("class",p.join(" "))},this.rmClass=function(e){p.splice(p.indexOf(e),1),t.attr("class",p.join(" "))},this.attr=function(t,n){return n?(e.setAttribute(t,n),void 0):e.getAttribute(t)},this.select=function(e){return Wrapper.select(e,o)},this.selectAll=function(e){return Wrapper.selectAll(e,o)};var p=(this.attr("class")||"").split(" ")},Wrapper.create=function(e){return new Wrapper(document.createElement(e))},Wrapper.select=function(e,t){var n=(t||document).querySelector(e);return n?new Wrapper(n):null},Wrapper.selectAll=function(e,t){for(var n=(t||document).querySelectorAll(e),o=[],a=0;a<n.length;a++)o.push(new Wrapper(n[a]));return o},window.Msg={},Msg.SCROLL="msgScroll",Msg.RENDER="msgRender",Msg.RESIZE="msgResize",Msg.ON_MAIN_OPEN="onMainOpen",Msg.ON_ABOUT_OPEN="onAboutOpen",Msg.ON_ITEM_OPEN="onItemOpen",window.Site=function(){var e={x:0,y:0};if(Config.click=Simplrz.touch?"tap":"click",Config.vscrollEnabled){window.scroll(0,1),VirtualScroll.addEventListener(function(e){Broadcast.send(Msg.SCROLL,e)}),window.addEventListener("resize",function(){Broadcast.send(Msg.RESIZE)}),window.addEventListener("mousemove",function(t){e.x=t.pageX,e.y=t.pageY});var t=function(){requestAnimationFrame(t),Broadcast.send(Msg.RENDER,e)};t()}},window.MainPanel=function(){var e,t=!0,n=0,o=0,a=Wrapper.select("#main"),r=Wrapper.select("#header"),i=Wrapper.select("#projects"),c=Wrapper.select("#play"),s=Wrapper.select("#footer"),d=Wrapper.selectAll(".box"),l=function(e){e?a.addClass("animated"):a.rmClass("animated")},u=function(){e=a.height()-window.innerHeight},f=function(e){t&&(o+=e.deltaY)},p=function(){if(t){o=Math.clamp(o,-e,0);var a=.2*(o-n);n+=a;var d=0|n;r.move(0,.6*d),i.move(0,d),c.move(0,d),s.move(0,d)}},h=function(){t||(a.move(0,0),t=!0)},g=function(){var e=window.innerWidth>500?500:window.innerWidth;a.move(e,0),t=!1},m=function(){var e=-window.innerWidth;a.move(e,0),t=!1};Broadcast.addClient(Msg.ON_ITEM_OPEN,m),Broadcast.addClient(Msg.ON_ABOUT_OPEN,g),Broadcast.addClient(Msg.ON_MAIN_OPEN,h),Broadcast.addClient(Msg.SCROLL,f),Broadcast.addClient(Msg.RESIZE,u),Broadcast.addClient(Msg.RENDER,p),d.forEach(function(e){e=Box(e),e.current=e.target=0}),u(),l(!0)},window.AboutPanel=function(){var e,t=!1,n=0,o=0,a=Wrapper.select("#about section");Wrapper.select("#about .close");var r=Wrapper.select("#about section > div");Wrapper.selectAll("#about .panel");var i=function(){e=a.height()<window.innerHeight?0:a.height()-window.innerHeight+Config.scrollMargin},c=function(e){t&&(o+=e.deltaY)},s=function(){t&&(o=Math.clamp(o,-e,0),n+=.2*(o-n),a.move(0,n))},d=function(){t=!0,r.e().setAttribute("class","animated"),r.rotate(0,0,0),r.move(0,0,0),r.css("opacity",1)},l=function(){if(t){r.rotate(0,-90,0);var e=window.innerWidth>500?500:window.innerWidth;r.move(-e,0,0),r.css("opacity",0),t=!1,u()}},u=function(){t=!1};Broadcast.addClient(Msg.ON_ITEM_OPEN,u),Broadcast.addClient(Msg.ON_ABOUT_OPEN,d),Broadcast.addClient(Msg.ON_MAIN_OPEN,l),Broadcast.addClient(Msg.SCROLL,c),Broadcast.addClient(Msg.RENDER,s),Broadcast.addClient(Msg.RESIZE,i);var f=window.innerWidth>500?500:window.innerWidth;r.move(-f,0,0),r.rotate(0,-90,0),i()},window.ContentPanel=function(){var e,t,n,o=!1,a=0,r=0,i=Wrapper.select("#content section"),c=Wrapper.select("#content h2"),s=Wrapper.select("#content .content"),d=Wrapper.select("#content .hero"),l=Wrapper.select("#content .close"),u=function(){e=s.position().y-(window.innerHeight-s.height())+Config.scrollMargin,e=Math.max(0,e)},f=function(t){!o||0>=e||(r+=t.deltaY)},p=function(){!o||0>=e||(r=Math.clamp(r,-e,0),a+=.2*(r-a),s.move(0,a),t&&t.move(0,.5*a),n&&n.move(0,.5*a))},h=function(t){o=!0,e=0,setTimeout(g,500,Data.getProjectById(t))},g=function(e){l.css("display","block"),i.css("display","block"),c.e().innerHTML=e.name,Loader.loadText(e.contentUrl,function(e){s.e().innerHTML=e,u()});var o=[];e.deps.forEach(function(e){Simplrz[e]||o.push(e)});var a=window.innerWidth,r=window.innerHeight;if("demo"==e.type){var f=9/16;if(e.aspect&&""!=e.aspect){var p=parseInt(e.aspect.split(":")[0]),h=parseInt(e.aspect.split(":")[1]);f=-1==p?r/a:h/p}var g=a*f;g<r-s.height()&&(g=r-s.height()),500>a&&(g=a),t=Wrapper.create("iframe"),t.e().setAttribute("frameBorder","0"),t.on("load",function(){var e=t.e().contentDocument;e&&e.addEventListener("DOMMouseScroll",function(e){VirtualScroll.invokeFirefox(e)}),setTimeout(function(){t.css("opacity","1")},500)}),t.css("opacity","0"),t.css("height",g+"px"),d.e().appendChild(t.e()),t.e().contentWindow.location.replace(e.url)}else if("article"==e.type){n=Wrapper.create("img");var m=Wrapper.create("div");n.on("load",function(){m.css("backgroundColor","rgba(0, 0, 0, 0)"),u()}),a>r||a>768?(n.css("width","100%"),n.css("height",a*(100/235)+"px"),m.css("width","100%"),m.css("height",a*(100/235)+"px"),n.e().src="assets/content/1920w-235as/"+e.id+".jpg"):(n.css("width","100%"),n.css("height",a+"px"),m.css("width","100%"),m.css("height",a+"px"),n.e().src="assets/content/871sq/"+e.id+".jpg"),d.e().appendChild(n.e()),d.e().appendChild(m.e())}},m=function(){o&&(o=!1,v())},v=function(){if(o=!1,s.e().innerHTML="",t){try{t.e().contentWindow.kill()}catch(e){}d.e().removeChild(t.e()),t=null}n&&(d.e().removeChild(n.e()),n=null),l.css("display","none"),i.css("display","none")};Broadcast.addClient(Msg.SCROLL,f),Broadcast.addClient(Msg.RENDER,p),Broadcast.addClient(Msg.RESIZE,u),Broadcast.addClient(Msg.ON_MAIN_OPEN,m),Broadcast.addClient(Msg.ON_ABOUT_OPEN,v),Broadcast.addClient(Msg.ON_ITEM_OPEN,h)},window.Box=function(e){e.id=e.attr("data-id");var t,n,o,a,r,i=e.select("div:nth-of-type(1)"),c=i.select(".mask"),s=i.select("img"),d=s.attr("data-tint"),l=e.attr("data-type"),u=window.innerWidth>768,f="project"==l?"675sq":"400sq",p="project"==l?"320sq":"200sq",h=u?f:p,g="assets/content/%f%/%id%.jpg".replace("%f%",h).replace("%id%",e.id);console.log(l,f,p,h,g),s.on("load",function(){Simplrz.touch?(r=Wrapper.create("div"),r.attr("class","frame"),r.css("borderColor",d),i.e().appendChild(r.e())):(t=Wrapper.create("div"),n=Wrapper.create("div"),o=Wrapper.create("div"),a=Wrapper.create("div"),t.attr("class","hover-frame left in-first"),n.attr("class","hover-frame top in-first"),o.attr("class","hover-frame right in-second"),a.attr("class","hover-frame bottom in-second"),t.css("backgroundColor",d),n.css("backgroundColor",d),o.css("backgroundColor",d),a.css("backgroundColor",d),i.e().appendChild(t.e()),i.e().appendChild(n.e()),i.e().appendChild(o.e()),i.e().appendChild(a.e()),Broadcast.addClient(Msg.RENDER,M)),c.css("backgroundColor","rgba(0, 0, 0, 0)")});var m=function(){t.attr("class","hover-frame left in-first"),n.attr("class","hover-frame top in-first"),o.attr("class","hover-frame right in-second"),a.attr("class","hover-frame bottom in-second"),t.scale(1,1),n.scale(1,1),o.scale(1,1),a.scale(1,1)},v=function(){t.attr("class","hover-frame left out-first"),n.attr("class","hover-frame top out-first"),o.attr("class","hover-frame right out-second"),a.attr("class","hover-frame bottom out-second"),t.scale(1,0),n.scale(0,1),o.scale(1,0),a.scale(0,1)},w=!1,E=function(){var t=e.e().getBoundingClientRect();t.top<window.innerHeight&&(s.e().src=g,Broadcast.removeClient(Msg.RENDER,E))},M=function(t){var n=e.e().getBoundingClientRect(),o=Math.pointInRect(t,n);o!=w&&(o?m():v()),w=o};return Broadcast.addClient(Msg.RENDER,E),e},window.Router=function(){var e,t,n,o=100,a=function(o){console.log("setRoute",o),t=o,e=n+"#"+t,document.location.href=e},r=function(){e=document.location.href;var o=e.indexOf("#");t=e.substring(o+1),n||(n=t.length>0?e.substring(0,o):e),console.log("getRoute",n,t)},i=function(){console.log("solveRoute",t),0==t.indexOf("/about")?Broadcast.send(Msg.ON_ABOUT_OPEN):0==t.indexOf("/project")?Broadcast.send(Msg.ON_ITEM_OPEN,t.split("/")[2]):Broadcast.send(Msg.ON_MAIN_OPEN)};Broadcast.addClient(Msg.ON_MAIN_OPEN,function(){a("/")}),Broadcast.addClient(Msg.ON_ABOUT_OPEN,function(){a("/about")}),Broadcast.addClient(Msg.ON_ITEM_OPEN,function(e){a("/project/"+e)}),r(),i(),setInterval(function(){document.location.href!=e&&(console.log("href changed",document.location.href,e),r(),i(t))},o)};