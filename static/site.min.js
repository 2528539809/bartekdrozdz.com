var Config={vscrollEnabled:!0,scrollMargin:0};if(Config.vscrollEnabled){var h=function(e){document.querySelector(e).style.overflowY="hidden"};h("#main"),h("#about"),h("#content"),document.querySelector("#content").style.pointerEvents="none"}(location.host.indexOf("localhost")>-1||location.host.indexOf("192.168")>-1)&&document.write('<script src="http://'+(location.host||"localhost").split(":")[0]+':35729/livereload.js?snipver=1"></'+"script>"),window.addEventListener("load",function(){Loader.loadJSON("/data",function(e){Data.setMain(e),Site(),MainPanel(),AboutPanel(),ContentPanel(),Router()})}),function(e){e.Data=function(){var e,t={};return t.setMain=function(t){e=t},t.getMain=function(){return e},t.getProjectById=function(t){t=t.indexOf("?")>-1?t.split("?")[0]:t;var n,o,i=e.projects.length,a=e.play.length;for(o=0;i>o;o++)if(n=e.projects[o],n.id==t)return n;for(o=0;a>o;o++)if(n=e.play[o],n.id==t)return n},t}()}("undefined"!=typeof process&&process.versions?exports:window),function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),o=Math.max(0,16-(n-e)),i=window.setTimeout(function(){t(n+o)},o);return e=n+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),window.Simplrz=function(){var e={},t=[],n=function(n,o){var i=o();e[n]=i,t.push(i?n:"no-"+n)},o=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}();return t.push(o.lowercase),n("touch",function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}),n("webrct",function(){return"getUserMedia"in navigator||"webkitGetUserMedia"in navigator}),n("canvas",function(){try{var e=document.createElement("canvas");return e.getContext("2d")}catch(t){return!1}}),n("webgl",function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}),n("flash",function(){return!!(navigator.mimeTypes["application/x-shockwave-flash"]||window.ActiveXObject&&new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}),document.documentElement.setAttribute("class",t.join(" ")),e}(),window.VirtualScroll=function(e){var t,n,o,i={},a=[],r=!1,c=2,s=-10,d={y:0,x:0,deltaX:0,deltaY:0};i.addEventListener=function(e){r||u(),a.push(e),t=a.length},i.invokeFirefox=function(e){d.y+=e.detail*s,d.deltaY=e.detail*s,l()};var l=function(){for(var e=0;t>e;e++)a[e](d)},u=function(){var t=function(e,t){e.preventDefault(),d.y+=t,d.deltaY=t,l()};e.addEventListener("mousewheel",function(e){t(e,e.wheelDeltaY||e.wheelDelta)}),e.addEventListener("DOMMouseScroll",function(e){t(e,e.detail*s)}),e.addEventListener("touchstart",function(e){var t=e.targetTouches[0];n=t.pageX,o=t.pageY}),e.addEventListener("touchmove",function(e){var n=e.targetTouches[0];t(e,(n.pageY-o)*c),o=n.pageY}),r=!0};return i}(document),Math.clamp=function(e,t,n){return Math.max(Math.min(e,n),t)},Math.pointInRect=function(e,t){return e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom},CSSUtil={hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}};var RL={};RL.setRlc=function(){},RL.log=RL.warn=RL.error=function(e){console.log("RL",e)},window.Broadcast=function(){var e={},t=function(){this.send=function(t,n){var o=e[t];if(o)for(var i=o.length,a=0;i>a;a++)o[a]&&o[a](n)},this.addClient=function(t,n){e[t]||(e[t]=[]);var o=e[t];o[n]>-1||o.push(n)},this.removeClient=function(t,n){var o=e[t];if(o)return o.splice(o.indexOf(n),1)},this.getClients=function(t){return e[t]}};return new t}(),window.Loader={loadText:function(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(){4==n.readyState&&t.call(null,n.responseText)},n.send()},loadJSON:function(e,t){Loader.loadText(e,function(e){t(JSON.parse(e))})}},window.Wrapper=function(e){var t=this,n="tap",o=e,i=0,a=0,r=0,c=0,s=0,d=0,l=1,u=1,f=function(){var e="translate3d("+i+"px,"+a+"px,"+r+"px) ",t="scale("+l+","+u+") ",n="rotateX("+c+"deg) rotateY("+s+"deg) rotateZ("+d+"deg)";o.style.webkitTransform=e+t+n,o.style.transform=e+t+n};this.move=function(e,t,n){i=e||0,a=t||0,r=n||0,f()},this.rotate=function(e,t,n){c=e||0,s=t||0,d=n||0,f()},this.scale=function(e,t){l=null!==e?e:1,u=null!==t?t:1,f()},this.moveBy=function(e,t,n){i+=e||0,a+=t||0,r+=n||0,f()},this.height=function(){return o.scrollHeight},this.rect=function(){return o.getBoundingClientRect()},this.position=function(){for(var e=o,t=0,n=0;null!=e;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent);return{x:t,y:n}},this.css=function(e,t){return e?(o.style[e]=t,void 0):o.style},this.e=function(){return o},this.on=function(e,t){e==n?(t.tapHandler=function(){var e,n,o,i={},a=2e4,r=100;return i.touchStart=function(t){e=(new Date).getTime(),n=t.targetTouches[0].pageX,o=t.targetTouches[0].pageY},i.touchEnd=function(i){var c=(new Date).getTime()-e,s=i.changedTouches[0].pageX-n,d=i.changedTouches[0].pageY-o,l=s*s+d*d;a>c&&r>l&&t()},i}(),o.addEventListener("touchstart",t.tapHandler.touchStart),o.addEventListener("touchend",t.tapHandler.touchEnd)):o.addEventListener(e,t)},this.off=function(e,t){o.removeEventListener(e,t)},this.addClass=function(e){p.push(e),t.attr("class",p.join(" "))},this.rmClass=function(e){p.splice(p.indexOf(e),1),t.attr("class",p.join(" "))},this.attr=function(t,n){return n?(e.setAttribute(t,n),void 0):e.getAttribute(t)},this.select=function(e){return Wrapper.select(e,o)},this.selectAll=function(e){return Wrapper.selectAll(e,o)};var p=(this.attr("class")||"").split(" ")},Wrapper.create=function(e){return new Wrapper(document.createElement(e))},Wrapper.select=function(e,t){var n=(t||document).querySelector(e);return n?new Wrapper(n):null},Wrapper.selectAll=function(e,t){for(var n=(t||document).querySelectorAll(e),o=[],i=0;i<n.length;i++)o.push(new Wrapper(n[i]));return o},window.Msg={},Msg.SCROLL="msgScroll",Msg.RENDER="msgRender",Msg.RESIZE="msgResize",Msg.ON_MAIN_OPEN="onMainOpen",Msg.ON_ABOUT_OPEN="onAboutOpen",Msg.ON_ITEM_OPEN="onItemOpen",window.Site=function(){var e={x:0,y:0};if(Config.click=Simplrz.touch?"tap":"click",Config.vscrollEnabled){window.scroll(0,1),VirtualScroll.addEventListener(function(e){Broadcast.send(Msg.SCROLL,e)}),window.addEventListener("resize",function(){Broadcast.send(Msg.RESIZE)}),window.addEventListener("mousemove",function(t){e.x=t.pageX,e.y=t.pageY});var t=function(){requestAnimationFrame(t),Broadcast.send(Msg.RENDER,e)};t()}},window.MainPanel=function(){var e,t=!0,n=0,o=0,i=0,a=Wrapper.select("#main"),r=Wrapper.select("#header"),c=Wrapper.select("#projects"),s=Wrapper.select("#footer"),d=Wrapper.selectAll(".box"),l=function(e){e?a.addClass("animated"):a.rmClass("animated")},u=function(){switch(e=a.height()-window.innerHeight,n){case 1:var t=window.innerWidth>500?500:window.innerWidth;a.move(t,0);break;case-1:var t=-window.innerWidth;a.move(t,0)}},f=function(e){t&&(i+=e.deltaY)},p=function(){if(t){i=Math.clamp(i,-e,0);var n=.2*(i-o);o+=n;var a=0|o;r.move(0,.85*a),c.move(0,a),s.move(0,a)}},h=function(){t||(a.move(0,0),t=!0,n=0)},w=function(){var e=window.innerWidth>500?500:window.innerWidth;a.move(e,0),t=!1,n=1},g=function(){var e=-window.innerWidth;a.move(e,0),t=!1,n=-1};Broadcast.addClient(Msg.ON_ITEM_OPEN,g),Broadcast.addClient(Msg.ON_ABOUT_OPEN,w),Broadcast.addClient(Msg.ON_MAIN_OPEN,h),Broadcast.addClient(Msg.SCROLL,f),Broadcast.addClient(Msg.RESIZE,u),Broadcast.addClient(Msg.RENDER,p),d.forEach(function(e){e=Box(e),e.current=e.target=0}),u(),l(!0)},window.AboutPanel=function(){var e,t=!1,n=0,o=0,i=Wrapper.select("#about section");Wrapper.select("#about .close");var a=Wrapper.select("#about section > div");Wrapper.selectAll("#about .panel");var r=function(){e=i.height()<window.innerHeight?0:i.height()-window.innerHeight+Config.scrollMargin},c=function(e){t&&(o+=e.deltaY)},s=function(){t&&(o=Math.clamp(o,-e,0),n+=.2*(o-n),i.move(0,n))},d=function(){t=!0,a.e().setAttribute("class","animated"),a.rotate(0,0,0),a.move(0,0,0),a.css("opacity",1)},l=function(){if(t){a.rotate(0,-90,0);var e=window.innerWidth>500?500:window.innerWidth;a.move(-e,0,0),a.css("opacity",0),t=!1,u()}},u=function(){t=!1};Broadcast.addClient(Msg.ON_ITEM_OPEN,u),Broadcast.addClient(Msg.ON_ABOUT_OPEN,d),Broadcast.addClient(Msg.ON_MAIN_OPEN,l),Broadcast.addClient(Msg.SCROLL,c),Broadcast.addClient(Msg.RENDER,s),Broadcast.addClient(Msg.RESIZE,r);var f=window.innerWidth>500?500:window.innerWidth;a.move(-f,0,0),a.rotate(0,-90,0),r()},window.ContentPanel=function(){var e,t,n,o,i,a=!1,r=0,c=0,s=Wrapper.select("#content section"),d=Wrapper.select("#content h2"),l=Wrapper.select("#content .content"),u=Wrapper.select("#content .hero"),f=Wrapper.select("#content .close"),p=function(){h(),M()},h=function(){e=l.position().y-(window.innerHeight-l.height())+Config.scrollMargin,e=Math.max(0,e)},w=function(t){a&&e>0&&(c+=t.deltaY)},g=function(){a&&e>0&&m()},m=function(){c=Math.clamp(c,-e,0),r+=.2*(c-r),d.move(0,3*r),f.move(0,3*r),l.move(0,r),n&&n.move(0,.5*r),o&&o.move(0,.5*r)},v=function(n){e=0,c=0,r=0,m(),a=!0,t=Data.getProjectById(n),setTimeout(E,500)},E=function(){f.css("display","block"),s.css("display","block"),d.e().innerHTML=t.name,Loader.loadText(t.contentUrl,function(e){l.e().innerHTML=e;var t=l.select(".video .play"),n=l.select(".video video");Simplrz.touch&&n.css("display","none"),t&&(t.css("backgroundImage","url("+t.attr("data-src")+")"),t.on(Config.click,function(){n.css("display","block"),n.e().play(),t.css("display","none")})),n&&n.on("pause",function(){Simplrz.touch&&!n.webkitDisplayingFullscreen&&(n.css("display","none"),t.css("display","block"))}),p()});var e=[];if(t.deps.forEach(function(t){Simplrz[t]||e.push(t)}),window.innerWidth,window.innerHeight,"demo"==t.type&&0==e.length){var a=.8*window.innerHeight;n=Wrapper.create("iframe"),n.e().setAttribute("frameBorder","0"),n.on("load",function(){setTimeout(function(){n.css("opacity","1")},500)}),n.css("opacity","0"),n.css("height",a+"px"),u.e().appendChild(n.e()),n.e().contentWindow.location.replace(t.url)}else o=Wrapper.create("img"),i=Wrapper.create("div"),o.on("load",function(){i.css("backgroundColor","rgba(0, 0, 0, 0)"),h()}),M(),u.e().appendChild(o.e()),u.e().appendChild(i.e())},M=function(){var e=window.innerWidth,n=window.innerHeight;e>n||e>768?(o.css("width","100%"),o.css("height",e*(100/235)+"px"),i.css("width","100%"),i.css("height",e*(100/235)+"px"),o.e().src="assets/content/1920w-235as/"+t.id+".jpg"):(o.css("width","100%"),o.css("height",e+"px"),i.css("width","100%"),i.css("height",e+"px"),o.e().src="assets/content/871sq/"+t.id+".jpg")},O=function(){a&&(a=!1,C())},C=function(){if(a=!1,l.e().innerHTML="",n){try{n.e().contentWindow.kill()}catch(e){}u.e().removeChild(n.e()),n=null}o&&(u.e().removeChild(o.e()),o=null),f.css("display","none"),s.css("display","none")};Broadcast.addClient(Msg.SCROLL,w),Broadcast.addClient(Msg.RENDER,g),Broadcast.addClient(Msg.RESIZE,p),Broadcast.addClient(Msg.ON_MAIN_OPEN,O),Broadcast.addClient(Msg.ON_ABOUT_OPEN,C),Broadcast.addClient(Msg.ON_ITEM_OPEN,v)},window.Box=function(e){e.id=e.attr("data-id");var t,n=e.select("div:nth-of-type(1)");e.select(".hover");var o=n.select(".mask"),i=n.select("img"),a=i.attr("data-tint"),r=e.attr("data-type"),c=window.innerWidth>768,s="project"==r?"675sq":"400sq",d="project"==r?"320sq":"200sq",l=c?s:d,u="assets/content/%f%/%id%.jpg".replace("%f%",l).replace("%id%",e.id);i.on("load",function(){Simplrz.touch&&(t=Wrapper.create("div"),t.attr("class","frame"),t.css("borderColor",a),n.e().appendChild(t.e())),o.css("backgroundColor","rgba(0, 0, 0, 0)")});var f=function(){var t=e.e().getBoundingClientRect();t.top<window.innerHeight&&(i.e().src=u,Broadcast.removeClient(Msg.RENDER,f))};return Broadcast.addClient(Msg.RENDER,f),e},window.Router=function(){var e,t,n,o=100,i=function(o){t=o,e=n+"#"+t,document.location.href=e},a=function(){e=document.location.href;var o=e.indexOf("#");t=e.substring(o+1),n||(n=t.length>0?e.substring(0,o):e)},r=function(){0==t.indexOf("/about")?Broadcast.send(Msg.ON_ABOUT_OPEN):0==t.indexOf("/project")?Broadcast.send(Msg.ON_ITEM_OPEN,t.split("/")[2]):Broadcast.send(Msg.ON_MAIN_OPEN)};Broadcast.addClient(Msg.ON_MAIN_OPEN,function(){i("/")}),Broadcast.addClient(Msg.ON_ABOUT_OPEN,function(){i("/about")}),Broadcast.addClient(Msg.ON_ITEM_OPEN,function(e){i("/project/"+e)}),a(),r(),setInterval(function(){document.location.href!=e&&(console.log("href changed",document.location.href,e),a(),r(t))},o)};